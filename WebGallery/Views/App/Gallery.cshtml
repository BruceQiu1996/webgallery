@model WebGallery.ViewModels.AppGalleryViewModel

@{
    ViewBag.Title = "Gallery";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@using (Html.BeginForm("Gallery", "App", new { page = 1 }, FormMethod.Post, null))
{
    <div class="container-fluid header">
        <label class="pull-left title">Windows Web App Gallery</label>
        @Html.TextBox("keyword", Model.Keyword, new { id = "SearchText", @class = "search-box pull-left", placeholder = "Searh Apps" })
        <input type="image" src="~/content/images/search-btn.jpg" alt="Submit" class="search-icon pull-left" />
        @{
            var firstIndex = Model.AppList.Count() == 0 ? (Model.CurrentPage - 1) * 20 : (Model.CurrentPage - 1) * 20 + 1;
            var lastIndex = (Model.CurrentPage - 1) * 20 + Model.AppList.Count();
        }
        <p class="app-amount">Display Results @firstIndex - @lastIndex For Your Searching </p>
    </div>
            }

@foreach (var app in Model.AppList)
{
    <div class="container-fluid">
        <hr />
        <div class="pull-left ">
            @{
                var logurl = string.IsNullOrWhiteSpace(app.LogoUrl) ? "~/Content/images/no-logo.png" : app.LogoUrl;
            }
            <img src="~/Content/images/no-logo.png" class="small-icon" />
        </div>
        <div>
            <lable class="app-title">@Html.ActionLink(app.Name, "Detail", new { id = app.SubmissionID })</lable>
            <span class="version">@app.Version </span>
            <span class="release-date">Released at: @app.ReleaseDate.ToShortDateString()</span>
        </div>
        <div>
            @{
                var description = app.BriefDescription.Length > 310 ? app.BriefDescription.Substring(0, 310) + "..." : app.BriefDescription;
            }
            <p>@description<span>@Html.ActionLink("More Information", "Detail", new { id = app.SubmissionID })</span></p>
        </div>
    </div>
                }

<div class="container-fluid page-switch">
    <hr />
    @Html.Hidden("currentpage", Model.CurrentPage)
    @Html.Hidden("totalpage", Model.TotalPage)
    @Html.ActionLink("Previous", "Gallery", new { keyword = Model.Keyword, page = Model.CurrentPage - 1 }, new { id = "prelink", @class = "pre-page" })
    @Html.ActionLink("Next", "Gallery", new { keyword = Model.Keyword, page = Model.CurrentPage + 1 }, new { id = "nextlink", @class = "next-page" })
</div>

@section Styles {
    @Styles.Render("~/css/app-gallery")
}

@section Scripts {
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/js/app-gallery")
}
@model WebGallery.ViewModels.AppSubmitViewModel

<h3 id="ReleaseNotes">Provide Release Notes:</h3>
<div class="submission-form-section">
    <input type="hidden" name="Submission.SubmissionID" id="SubmissionId" value="@Model.Submission.SubmissionID" />
    @{
        var showNickname = (Model.CanEditNickname) ? string.Empty : "display:none";
    }
    <div class="clearfix" style="@showNickname">
        <label for="AppId" class="textbox-label">App ID</label>
        <input type="text" name="Submission.Nickname" id="AppId" value="@Model.Submission.Nickname" class="textbox" placeholder="Application"
               data-title="App Id"
               data-msg-required="(*)"
               data-msg-alphanumeric="Alphanumeric only."
               data-msg-d-alphanumeric="can only use letters and digits."
               data-msg-unique="Not unique, please change. The combination of the App ID, Version and Language you have provided are already in use by another submission. To make this submission unique you will need to change at least one of these values. Typically, the best solution is modify the App ID you have chosen."
               data-msg-d-unique="App ID, Version and Language are used by another submission. Modify the App ID or the Version." />
        <div class="explanation">
            <div class="explanation-inner">Provide an ID for your application. Use only letters and digits, no spaces or punctuation. This ID is used as the page name for your application in the <a href='@Url.RouteUrl(SiteRouteNames.Home)' title="Windows Web App Gallery" onclick="window.open(this.href, '_blank', ''); return false;" tabindex="9001">Windows Web App Gallery</a>.<br /><br />You will not be able to change this ID with future edits of your application such as for version updates.</div>
        </div>
    </div>
    <div class="clearfix">
        <label for="Version" class="textbox-label">Version</label>
        <input type="text" name="Submission.Version" id="Version" value="@Model.Submission.Version" class="textbox" placeholder="1.2.3.4" data-title="Version" data-msg-required="(*)" />
    </div>
    <div class="clearfix">
        <label for="SubmittingEntity" class="textbox-label">Submitting Entity</label>
        <input type="text" name="Submission.SubmittingEntity" id="SubmittingEntity" value="@Model.Submission.SubmittingEntity" class="textbox" data-title="Submitting Entity" data-msg-required="(*)" />
        <div class="explanation">
            <div class="explanation-inner">Submitting Entity is the name of the entity submitting the application.</div>
        </div>
    </div>
    <div class="clearfix">
        <label for="SubmittingEntityURL" class="textbox-label">Submitting Entity URL</label>
        <input type="text" name="Submission.SubmittingEntityURL" id="SubmittingEntityURL" value="@Model.Submission.SubmittingEntityURL" class="textbox" placeholder="http://www.SubmittingEntity.org"
               data-title="Submitting Entity URL"
               data-msg-required="(*)"
               data-msg-url="unknown URL format." />
        <div class="explanation">
            <div class="explanation-inner">Provide the URL for the primary website for the Submitting Entity.</div>
        </div>
    </div>
    <div class="clearfix">
        <label for="AppWebSiteURL" class="textbox-label">App Web Site URL</label>
        <input type="text" name="Submission.AppURL" id="AppWebSiteURL" value="@Model.Submission.AppURL" class="textbox" placeholder="http://www.SubmittingEntity.org/app"
               data-title="App Web Site URL"
               data-msg-required="(*)"
               data-msg-url="unknown URL format." />
        <div class="explanation">
            <div class="explanation-inner">Provide an URL to your application's website homepage.</div>
        </div>
    </div>
    <div class="clearfix">
        <label for="SupportURL" class="textbox-label">Support URL</label>
        <input type="text" name="Submission.SupportURL" id="SupportURL" value="@Model.Submission.SupportURL" class="textbox" placeholder="http://www.SubmittingEntity.org/support"
               data-title="Support URL"
               data-msg-required="(*)"
               data-msg-url="unknown URL format." />
        <div class="explanation">
            <div class="explanation-inner">The <a href="http://learn.iis.net/page.aspx/605/web-application-gallery-principles/" title="Windows Web App Gallery Principles" onclick="window.open(this.href, '_blank', ''); return false;" tabindex="9001">Windows Web App Gallery Principles</a> require your application to provide free web based support to customers.</div>
        </div>
    </div>
    <div class="clearfix">
        <label for="ReleaseDate" class="textbox-label">Release Date</label>
        <input type="text" name="Submission.ReleaseDate" id="ReleaseDate" value="@Model.Submission.ReleaseDate.ToString("M/d/yyyy")" class="textbox datefield" placeholder="@DateTime.Now.ToString("M/d/yyyy")" data-title="Release Date" data-msg-required="(*)" />
        <div class="explanation">
            <div class="explanation-inner">The date that the submitted application has been or will be publically available.</div>
        </div>
    </div>
    <div class="clearfix">
        <label for="PrimaryCategory" class="dd-label">Primary Category</label>
        <select name="Submission.CategoryID1" id="PrimaryCategory" class="dropdown dd-primary-category" data-title="Primary Category" data-msg-required="(*)">
            <option value="">Pick one</option>
            @foreach (var c in ViewBag.Categories)
            {
                if (c.CategoryID == Model.Submission.CategoryID1.AsInt())
                {
                    <option selected="selected" value="@c.CategoryID">@c.Name</option>
                }
                else
                {
                    <option value="@c.CategoryID">@c.Name</option>
                }
            }
        </select>
        <div class="explanation">
            <div class="explanation-inner">Select the primary category for your application. Application may fall into more one or more categories. You have the option of associating your application with a second category.</div>
        </div>
    </div>
    <div class="clearfix">
        <label for="SecondaryCategory" class="dd-label">Secondary Category</label>
        <select name="Submission.CategoryID2" id="SecondaryCategory" class="dropdown dd-secondary-category">
            <option value="">None</option>
            @foreach (var c in ViewBag.Categories)
            {
                if (c.CategoryID == Model.Submission.CategoryID1.AsInt())
                {
                    <option selected="selected" value="@c.CategoryID">@c.Name</option>
                }
                else
                {
                    <option value="@c.CategoryID">@c.Name</option>
                }
            }
        </select>
        <div class="explanation">
            <div class="explanation-inner">Select a secondary category for your application.</div>
        </div>
    </div>
    <div class="clearfix">
        <label for="ProfessionalServicesURL" class="textbox-label">Professional Services URL</label>
        <input type="text" name="Submission.ProfessionalServicesURL" id="ProfessionalServicesURL" value="@Model.Submission.ProfessionalServicesURL" class="textbox" placeholder="http://www.services.org/services.html" data-title="Professional Services URL" data-msg-url="unknown URL format." />
        <div class="explanation">
            <div class="explanation-inner">Provide an URL to the Web page where you promote your commercial services.</div>
        </div>
    </div>
    <div class="clearfix">
        <label for="CommercialProductURL" class="textbox-label">Commercial Product URL</label>
        <input type="text" name="Submission.CommercialProductURL" id="CommercialProductURL" value="@Model.Submission.CommercialProductURL" class="textbox" placeholder="http://www.SubmittingEntity.org/professionalversion.html" data-title="Commercial Product URL" data-msg-url="unknown URL format." />
        <div class="explanation">
            <div class="explanation-inner">Provide an URL to the Web page where you promote your commercial products.</div>
        </div>
    </div>
    <div class="image-set">
        <div class="tab_xp tab_default">
            <div class="tab_header">
                <span class="tab_active"><span class="tab_outer"><span class="tab_inner"><span class="tab_tab">Images</span></span></span></span>
            </div>
            <div class="tab_body">
                <div>
                    <!--Logo-->
                    @{
                        var showLogoUploader = string.IsNullOrWhiteSpace(Model.Submission.LogoUrl) ? string.Empty : "display:none";
                        Model.SetLogo = string.IsNullOrWhiteSpace(Model.Submission.LogoUrl); // if logo url is null/empty, set logo for Required validation
                    }
                    <input type="hidden" name="SetLogo" id="SetLogo" value="@Model.SetLogo.ToString()" />
                    <label for="logo" class="file-upload-label">Logo</label>
                    <div id="panelEmptyLogo" class="file-upload-wrapper" style="@showLogoUploader">
                        <input type="file" name="logo" id="logo" title="Upload a logo" class="file-upload" data-title="Logo" data-msg-required="(*)" />
                        <div class="explanation">
                            <div class="explanation-inner">Your logo must be no more than 200px in width or height and provided in PNG format.</div>
                        </div>
                        <a id="resetLogo" onclick="resetFileUploader(this);" class="reset-file-uploader">reset</a>
                    </div>
                    @if (!string.IsNullOrWhiteSpace(Model.Submission.LogoUrl))
                    {
                        <div id="panelSubmittedLogo" class="submitted-panel">
                            <a onclick="$(this).parent().children(':last').show()" title="View last submission">View last submission</a>
                            /
                            <a id="replaceLogo" onclick="replaceLogo()" title="Submit a different logo">Submit a different logo</a>
                            <div style="display:none">
                                <div class="popup-background">
                                </div>
                                <div class="popup-foreground">
                                    @* Deprecated: <img src="https://www.microsoft.com/web/handlers/webpi.ashx?command=getimage&amp;guid={logo.ImageGUID}" />*@
                                    <img src="@Model.Submission.LogoUrl" />
                                    <input type="image" class="popup-close-btn" src="~/content/images/close-btn.png" onclick="$(this).parent().parent().hide(); return false;" />
                                </div>
                            </div>
                        </div>
                    }
                    <!--Screenshots (1,2,3,4,5,6)-->
                    <p class="screenshots-title">Screenshots (optional)</p>
                    @for (var index = 1; index <= 6; index++)
                    {
                        var screenshotUrl = Model.ScreenshotUrls[index - 1]; // zero-based
                        var hiddenNameForSetScreenshot = $"SetScreenshot{index}";
                        var hiddenIdForSetScreenshot = hiddenNameForSetScreenshot;
                        var setScreenshot = Model.SettingStatusOfScreenshots[index - 1];
                        var fuName = $"screenshot{index}";
                        var fuId = fuName;
                        var panelIdForEmptyScreenshot = $"panelEmtpyScreenshot{index}";
                        var showScreenshotUploader = string.IsNullOrWhiteSpace(screenshotUrl) ? string.Empty : "display:none";
                        var panelIdForSubmittedScreenshot = $"panelSubmittedScreenshot{index}";

                        <input type="hidden" name="@hiddenNameForSetScreenshot" id="@hiddenIdForSetScreenshot" value="@setScreenshot.ToString()" />
                        <label for="@fuId" class="file-upload-label">@index</label>
                        <div id="@panelIdForEmptyScreenshot" class="file-upload-wrapper" style="@showScreenshotUploader">
                            <input type="file" name="@fuName" id="@fuId" title="Screenshot @index" class="file-upload" />
                            <div class="explanation">
                                <div class="explanation-inner">Add up to 6 screenshots of your application. Screenshots should be no more than 800px in width or 600px in height and provided in PNG format.</div>
                            </div>
                            <a onclick="resetFileUploader(this);" class="reset-file-uploader">reset</a>
                        </div>

                        if (!string.IsNullOrWhiteSpace(screenshotUrl))
                        {
                            <div id="@panelIdForSubmittedScreenshot" class="submitted-panel">
                                <a onclick="$(this).parent().children(':last').show()" title="View last submission">View last submission</a>
                                /
                                <a href="javascript:replaceScreenshot(@index)" title="Delete or replace screenshot">Delete or replace screenshot</a>
                                <div style="display:none">
                                    <div class="popup-background">
                                    </div>
                                    <div class="popup-foreground">
                                        @* Deprecated: <img src="https://www.microsoft.com/web/handlers/webpi.ashx?command=getimage&amp;guid={screenshot.ImageGUID}" />*@
                                        <img src="@screenshotUrl" />
                                        <input type="image" class="popup-close-btn" src="~/content/images/close-btn.png" onclick="$(this).parent().parent().hide(); return false;" />
                                    </div>
                                </div>
                            </div>
                        }
                    }
                    <div class="clearfix">&nbsp;</div>
                </div>
            </div>
        </div>
    </div>
</div>